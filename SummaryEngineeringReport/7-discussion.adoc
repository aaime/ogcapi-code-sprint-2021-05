[[discussion]]
== Discussion

The participants used the Gitter platform for written discussion. This was in addition to using Gotomeeting for discussion during the scheduled teleconferences. Individual issues were recorded on the Issues board on GitHub. A screenshot of the Gitter channel is shown below in <<img_gitter>>. The Gitter channel can be found at https://gitter.im/ogc-developer/Sprints

[#img_gitter,reftext='{figure-caption} {counter:figure-num}']
.Screenshot of Gitter channel
image::images/gitter.png[width=800,align="center"]

A screenshot of the GitHub repository is shown below in <<img_github>>. The GitHub repository can be found at https://github.com/opengeospatial/ogcapi-code-sprint-2021-05

[#img_github,reftext='{figure-caption} {counter:figure-num}']
.Screenshot of GitHub repository
image::images/github.png[width=800,align="center"]

The next subsections provide a summary of the discussion.

=== OGC API support for different approaches to organising styles, layers and data sources

There was a https://github.com/opengeospatial/ogcapi-code-sprint-2021-05/issues/15[discussion] on how OGC APIs could support different approaches to organising styles, layers and data sources. The sprint participants observed that there are two different approaches of how SLD is used by implementations. One approach involves having the SLD at the top level, whereas the other approach does not. The sprint participants were asked the question "Should we have two conformance classes for the different approaches?".  https://github.com/opengeospatial/ogcapi-styles/issues/5[Issue#5 on the OGC API - Styles repository] includes a proposal how to change the specification to better support SLD as an encoding. After discussing the topic during the sprint, the sprint participants made the recommendation that: There is a need to have two separate conformance classes to support the different paradigms.

=== Support for legends

There was a https://github.com/opengeospatial/ogcapi-code-sprint-2021-05/issues/17[discussion] on the need for support for legends. Currently legends are not supported in OGC API - Maps nor OGC API - Styles, however it is expected that client applications will need or want to present a legend for the information on a map. To facilitate the discussion, CubeWerx provided the paths to a Cubeserv implementation of a legend capability. The paths are listed in <<annex_a,Annex A>>. A screenshot from a prototype built using pygeoapi are shown in <<img_pygeoapi_legend1>>.

[#img_pygeoapi_legend1,reftext='{figure-caption} {counter:figure-num}']
.Screenshot from a legend generated using pygeoapi
image::images/pygeoapi_legend1.png[width=800,align="center"]

The sprint participants also noted that if a legend is a resource in OGC API - Maps, it could be a bitmap graphic of a legend. However, if it is a resource in OGC API - Styles, then it should be a data resource, so that clients can render the legend as they wish and that supports combining information from multiple legends.

=== Changes to a style with multiple occurrences in an API

There was a https://github.com/opengeospatial/ogcapi-code-sprint-2021-05/issues/18[discussion] regarding how changes to a style with multiple occurrences in an API are executed. The sprint participants were asked the question "If a style `foo` is used in several places in an API (that is, there are several resources where the path includes `/styles/foo` somewhere), does a PUT/DELETE on that style affect all occurrences of the style or only the one on which the operation is executed? In other words, is it only one resource with multiple URIs or are these separate resources?". For example, for an implementation that has a "night" style at `/styles/night`, the participants considered whether changes to that style should be propagated to other instances of the same style e.g. `/collection/foo/styles/night`.

After discussing this topic, the sprint participants proposed adding the following statement to the OGC API - Styles specification:

[quote]
____
A service may implement HTTP PUT and/or HTTP DELETE methods for the `/collections/{collectionId}/styles/{styleId}` endpoints. If implemented, these methods shall have the effect of adding/replacing or deleting the definition of the specified style as it pertains to the specified collection. E.g., after a DELETE of `/collections/foo/styles/night`, a future GET of `/collections/foo/styles/night` should return a 404 Not Found, whereas a future GET of `/styles/night` should return a style definition that lacks any mention of collection foo.
____



=== Topic 4

TBA

=== Topic 5

TBA

=== Topic 6

TBA

=== Summary of Code Sprint Outcomes

This section presents a summary of the outcomes of the sprint.

==== Immediate Lessons

* The Tiles API is reasonably stable. We have seen different interpretations of how to apply styles to collections maps and the dataset maps.
* Evolution of WKSS into common TMS (the ones that are going to be registered). The evolution has taken us to a conclusion that WKSS may no longer be necessary.
* The concept of buildings blocks has been completely demonstrated. The three APIs have been successfully demonstrated together.
* The sprint has shown that a lot that is common can be shared across the APIs i.e. how much OGC API - Common - Part 2 facilitates the client implementation.
* The interaction between Maps, Tiles, Styles worked well. No major issues came up that could not be verified.
* More work needs to be done on Styles in general. e.g. to determine the impact on API resources when styles are used.
* The code sprint focused on the API aspects of the styles but not on the formats of the styles. More work is needed on the formats aspects of the styles (e.g. SymCore).
* While in the Tiles API we have developed a metadata model, in the Maps API there has been less interest in developing a specific metadata model.

==== Implications for NMAs

The sprint participants considered what the APIs will do to help meet the needs of NMAs. The following is a summary.

* *Providing the public with access to geospatial data and maps*: The OGC APIs will make it easier for the general public to access maps through regular web browser technologies. For example, through OGC API - Maps it is now possible to access a complete map through a basic URL (i.e. no query parameters). OGC API - Tiles will make it easier to publish maps as vector tiles, which are becoming increasingly popular in the NMA community. The APIs are able to provide data in a way that 2.5D and 3D visualization clients are able to handle.
* *Facilitating analytics*: OGC API - Tiles is able to publish tiled coverage data in such a way that makes it easier to 'stream' coverages for analysis at the screen resolution. This makes it possible to create histograms, vegetation indices, and other analytical reports all at the screen resolution. The flexibility of specifying the origin of the tiles will make it easier to combine regular OGC tiles with other tiles.
* *Reducing barriers to accessing geospatial data*: All of the OGC APIs together make it easier to start with a dataset and then find a way to generate tiles and other resources. The OGC APIs are integrated in a very convenient way. The Styles API makes it possible for NMA's to publish styles from a central location in a way that is consistent with how they publish data. The integrated environment makes it easier to manage things together.
